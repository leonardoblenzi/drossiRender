<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Publicidade • Product Ads</title>

  <!-- Reaproveita estilos globais -->
  <link rel="stylesheet" href="/css/dashboard.css?v=2">
  <link rel="stylesheet" href="/css/publicidade.css?v=2">
</head>
<body>
  <!-- TOPO FIXO -->
  <header class="account-bar">
    <div class="account-bar__left">
      <a class="brand" href="/dashboard" aria-label="DAVANTTI">
        <img
          src="/img/davantti.png"
          alt="DAVANTTI"
          class="brand__logo"
          width="170"
          height="42"
          decoding="async"
          loading="eager"
        />
      </a>
    </div>

    <div class="account-bar__right">
      <div class="account-bar__current">
        <span class="lbl">Conta:</span>
        <span id="account-current" class="val" data-account-label>Carregando...</span>
      </div>

      <button id="btn-status" class="account-bar__status" title="Ver status do token" type="button" data-account-status>
        Status
      </button>

      <button id="account-switch" class="account-bar__switch" title="Trocar de conta" type="button" data-account-switch>
        Trocar Conta
      </button>
    </div>
  </header>

  <!-- navegacao com abas -->
  <nav class="main-nav">
    <div class="tabs">
      <button class="nav-tab" onclick="location.href='/dashboard#dashboard'">Dashboard</button>
      <button class="nav-tab" onclick="location.href='/dashboard#produtos'">Produtos</button>
      <button class="nav-tab" onclick="location.href='/dashboard#ia'">IA & Analytics</button>
      <button class="nav-tab active" onclick="location.href='/dashboard#publicidade'">Publicidade</button>
      <button class="nav-tab" onclick="location.href='/dashboard#benchmarking'">Benchmarking</button>
      <button class="nav-tab" onclick="location.href='/dashboard#alertas'">Alertas</button>
      <button class="nav-tab" onclick="location.href='/dashboard#ml'">ML</button>
      <button class="nav-tab" onclick="location.href='/dashboard#full'">FULL</button>
      <button class="nav-tab" onclick="location.href='/dashboard#admin'">Admin</button>
    </div>
  </nav>

  <div class="wrap publicidade-wrap">
    <header class="page-header">
      <div>
        <h2>Product Ads</h2>
        <p class="subtitle">
          Visualize campanhas de Product Ads, acompanhe as principais métricas e veja os anúncios participantes.
        </p>
      </div>

      <form id="ads-filters" class="ads-filters" autocomplete="off">
        <div class="ads-filters__group">
          <label for="dateFrom">De</label>
          <input id="dateFrom" name="dateFrom" type="date">
        </div>
        <div class="ads-filters__group">
          <label for="dateTo">Até</label>
          <input id="dateTo" name="dateTo" type="date">
        </div>
        <button id="btnReloadAds" type="button" class="btn primary">Atualizar métricas</button>
      </form>
    </header>

    <!-- Resumo numérico -->
    <section class="ads-summary">
      <div class="ads-summary-grid">
        <article class="ads-summary-card">
          <h3>Investimento</h3>
          <p id="sumCost" class="ads-summary__value">R$ 0,00</p>
          <p class="ads-summary__hint">Custo total das campanhas no período</p>
        </article>

        <article class="ads-summary-card">
          <h3>Cliques</h3>
          <p id="sumClicks" class="ads-summary__value">0</p>
          <p class="ads-summary__hint">Total de cliques gerados</p>
        </article>

        <article class="ads-summary-card">
          <h3>Impressões</h3>
          <p id="sumPrints" class="ads-summary__value">0</p>
          <p class="ads-summary__hint">Quantidade de vezes que seus anúncios apareceram</p>
        </article>

        <article class="ads-summary-card">
          <h3>CTR médio</h3>
          <p id="avgCtr" class="ads-summary__value">0,00%</p>
          <p class="ads-summary__hint">Taxa média de cliques sobre impressões</p>
        </article>

        <article class="ads-summary-card">
          <h3>ACOS médio</h3>
          <p id="avgAcos" class="ads-summary__value">0,00%</p>
          <p class="ads-summary__hint">Custo em relação ao faturamento</p>
        </article>

        <article class="ads-summary-card">
          <h3>ROAS médio</h3>
          <p id="avgRoas" class="ads-summary__value">0,00x</p>
          <p class="ads-summary__hint">Retorno sobre o investimento em anúncios</p>
        </article>

        <article class="ads-summary-card">
          <h3>Vendas (unid.)</h3>
          <p id="sumUnits" class="ads-summary__value">0</p>
          <p class="ads-summary__hint">Unidades vendidas atribuídas aos anúncios</p>
        </article>

        <article class="ads-summary-card">
          <h3>Faturamento</h3>
          <p id="sumAmount" class="ads-summary__value">R$ 0,00</p>
          <p class="ads-summary__hint">Valor de vendas atribuídas às campanhas</p>
        </article>
      </div>
    </section>

    <!-- Gráfico -->
    <section class="ads-chart">
      <div class="card">
        <header class="card-header">
          <div>
            <h3>Evolução das métricas</h3>
            <p class="muted">
              Visualize impressões, cliques, investimento e faturamento no período selecionado.
            </p>
          </div>
        </header>

        <div class="ads-chart-wrapper" style="height: 260px;">
          <canvas id="adsMetricsChart"></canvas>
        </div>
      </div>
    </section>

    <!-- RANKING -->
    <section class="ads-ranking">
      <div class="card">
        <header class="card-header ads-ranking-header">
          <div>
            <h3>Ranking de campanhas</h3>
            <p id="rankingPeriod" class="muted">Período: —</p>
          </div>
        </header>

        <div class="table-wrapper table-wrapper--wide table-shell">
          <table class="table table-ranking" id="tblCampaigns" data-table="campaigns">
            <thead>
              <tr>
                <th class="sticky-col">Nome da campanha</th>
                <th>Status</th>
                <th>Estratégia</th>
                <th class="num">ACOS objetivo</th>
                <th class="num">ACOS</th>
                <th class="num">TACOS</th>
                <th class="num">CPI</th>
                <th class="num">LISB</th>
                <th class="num">LISAR</th>
                <th class="num">Participação</th>
                <th class="num">Vendas publicidade</th>
                <th class="num">Impressões</th>
                <th class="num">Cliques</th>
                <th class="num">Investimento</th>
                <th class="num">CPC</th>
                <th class="num">CTR</th>
                <th class="num">Receita</th>
                <th class="num">Retornos</th>
              </tr>
            </thead>
            <tbody id="tbodyCampaigns">
              <tr>
                <td colspan="18" class="muted">
                  Nenhuma campanha carregada. Clique em <strong>Atualizar métricas</strong>.
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- DETALHE -->
    <section class="ads-detail">
      <div class="table-wrapper table-wrapper--wide table-shell ads-items-wrapper">
        <table class="table ads-items-table" id="tblItems">
          <thead>
            <tr>
              <th class="sticky-col">Nome da campanha</th>
              
              <th>Qualidade da publicação</th>
              <th class="num">ACOS</th>

              <th class="num">TACOS</th>
              <th class="num">Impressões</th>
              <th class="num">Cliques</th>
              <th class="num">CTR</th>
              <th class="num">CPC</th>
              <th class="num">Conversão publicitária</th>
              <th class="num">Vendas publicidade</th>
              <th class="num">Vendas diretas</th>
              <th class="num">Vendas assistidas</th>
            </tr>
          </thead>
          <tbody id="tbodyItems">
            <tr>
              <td colspan="12" class="muted">Nenhuma campanha selecionada.</td>
            </tr>
          </tbody>
        </table>

        <div class="ads-pagination" id="adsPagination"></div>
      </div>
    </section>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="/js/account-bar.js" defer></script>
  <script src="/js/publicidade.js" defer></script>
</body>
</html>
