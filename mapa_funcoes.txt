Publicidade/Product ADS

/ (raiz do projeto)
â”œâ”€ index.js                         # Sobe o Express, registra as rotas
â”‚   â””â”€ usa routes/publicidadeRoutes.js
â”‚
â”œâ”€ routes/
â”‚   â”œâ”€ publicidadeRoutes.js         # Rotas HTTP de Product Ads
â”‚   â”‚   â€¢ GET /publicidade          -> abre a tela (view)
â”‚   â”‚   â€¢ GET /api/publicidade/product-ads/campaigns
â”‚   â”‚   â€¢ GET /api/publicidade/product-ads/campaigns/:id/items
â”‚   â”‚   â€¢ GET /api/publicidade/product-ads/metricas-diarias
â”‚   â”‚   â””â”€ chama PublicidadeController
â”‚   â”‚
â”‚   â””â”€ ... (outras rotas)
â”‚
â”œâ”€ controllers/
â”‚   â”œâ”€ PublicidadeController.js     # Camada de controller / API
â”‚   â”‚   â€¢ listarCampanhas(req,res)          -> ProductAdsService.listarCampanhas()
â”‚   â”‚   â€¢ listarItensCampanha(req,res)      -> ProductAdsService.listarItensCampanha()
â”‚   â”‚   â€¢ metricasDiarias(req,res)         -> ProductAdsService.metricasDiarias()
â”‚   â”‚   â””â”€ responde JSON para o front
â”‚   â”‚
â”‚   â””â”€ ... (outros controllers)
â”‚
â”œâ”€ services/
â”‚   â”œâ”€ productAdsService.js         # ğŸ’¥ AQUI estÃ¡ toda a lÃ³gica de Product Ads
â”‚   â”‚   â€¢ urls()                                -> endpoints do ML
â”‚   â”‚   â€¢ withAuth() / prepararAuth()          -> token + chamadas autenticadas
â”‚   â”‚   â€¢ obterAdvertiserId()                  -> pega advertiser da conta
â”‚   â”‚   â€¢ buscarThumbnailsParaItens()         -> ğŸ” busca thumbnails em /items
â”‚   â”‚   â€¢ listarCampanhas()                    -> campanhas agregadas
â”‚   â”‚   â€¢ listarItensCampanha()                -> itens + mÃ©tricas + thumbnail
â”‚   â”‚   â€¢ metricasDiarias()                    -> sÃ©rie diÃ¡ria para grÃ¡fico
â”‚   â”‚   â€¢ exportarItensCampanhaCsv()           -> export CSV
â”‚   â”‚
â”‚   â””â”€ tokenService.js / tokenService/index.js # usado por prepararAuth()/withAuth()
â”‚
â”œâ”€ views/
â”‚   â”œâ”€ publicidade.ejs               # Tela â€œPainel de Product Adsâ€
â”‚   â”‚   â€¢ tabela de ranking de campanhas
â”‚   â”‚   â€¢ tabela de itens da campanha
â”‚   â”‚   â€¢ inclui <script src="/js/publicidade.js">
â”‚   â”‚
â”‚   â””â”€ partials/â€¦                    # (se tiver componentes reaproveitados)
â”‚
â””â”€ public/
    â”œâ”€ js/
    â”‚   â”œâ”€ publicidade.js           # Frontend da tela
    â”‚   â”‚   â€¢ busca /api/publicidade/product-ads/campaigns
    â”‚   â”‚   â€¢ busca /api/publicidade/product-ads/campaigns/:id/items
    â”‚   â”‚   â€¢ aplica filtros, paginaÃ§Ã£o (20 itens por pÃ¡gina)
    â”‚   â”‚   â€¢ monta o HTML das linhas, usando `item.thumbnail`
    â”‚   â”‚   â€¢ (vamos colocar aqui o loading de lista / filtros)
    â”‚   â”‚
    â”‚   â””â”€ helpers/â€¦, outros .js
    â”‚
    â”œâ”€ css/
    â”‚   â”œâ”€ publicidade.css          # (se tiver um CSS especÃ­fico da tela)
    â”‚   â””â”€ main.css / theme.css     # estilos globais
    â”‚
    â””â”€ img/
        â””â”€ ...                      # Ã­cones, placeholders de imagem, etc.
