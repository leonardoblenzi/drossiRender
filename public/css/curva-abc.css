/* ===============================
   Curva ABC — estilo base (VISITAS + CONVERSÃO)
   =============================== */
:root{
  --bg-page:#f5f6f8; --card-bg:#fff; --card-border:#e8e9ee;
  --text-1:#0f172a; --text-2:#475569; --line:#e5e7eb;
  --chip-bg:#f1f5f9; --chip-border:#e2e8f0; --accent:#2563eb;
  --shadow-sm:0 1px 2px rgba(0,0,0,.06); --shadow-md:0 6px 16px rgba(0,0,0,.08);
  --curve-a:#14b8a6; --curve-b:#ef476f; --curve-c:#6d28d9;
  --kpi-card-width:280px; --kpi-gap:12px;
}

body.curva-abc{ background:var(--bg-page); color:var(--text-1); }

/* Cabeçalho + container */
.page-header{ max-width:1200px; margin:24px auto 8px; padding:0 24px; }
.page-header h1{ font-size:28px; font-weight:700; margin:0 0 4px; }
.page-header .sub{ color:var(--text-2); font-size:14px; }

.wrap{ max-width:1480px; margin:12px auto 32px; padding:0 16px; }

/* Cards */
.card{
  background:var(--card-bg); border:1px solid var(--card-border);
  border-radius:12px; box-shadow:var(--shadow-sm); padding:16px; position:relative;
}
.card.clickable{ cursor:pointer; transition:transform .06s, box-shadow .12s; }
.card.clickable:hover{ transform:translateY(-1px); box-shadow:var(--shadow-md); }

/* Filtros */
.filters{ display:grid; grid-template-columns:repeat(6,minmax(0,1fr)); gap:12px; align-items:end; }
.filters label{ display:block; font-size:12px; color:var(--text-2); margin:0 0 6px; }
.input,.filters select,.filters input[type="date"],.filters input[type="text"]{
  width:100%; padding:8px 10px; border-radius:10px; border:1px solid var(--card-border); background:#fff; color:var(--text-1); outline:none;
}
.input:focus,.filters select:focus,.filters input:focus{ border-color:#c7d2fe; box-shadow:0 0 0 3px rgba(37,99,235,.12); }
.btn{ display:inline-flex; align-items:center; justify-content:center; gap:8px; padding:10px 14px; border-radius:10px; border:1px solid var(--card-border); background:#fff; cursor:pointer; }
.btn:hover{ background:#f8fafc; }
.btn.primary{ background:var(--accent); color:#fff; border-color:var(--accent); }

.filter-toolbar{ display:flex; gap:12px; flex-wrap:wrap; margin-top:10px; }
.switch-group{ display:inline-flex; border:1px solid var(--card-border); border-radius:12px; padding:4px; }
.btn-switch{ appearance:none; border:0; background:transparent; padding:8px 12px; border-radius:8px; cursor:pointer; color:var(--text-2); font-weight:600; }
.btn-switch.active{ background:#eef2ff; color:#1d4ed8; box-shadow:inset 0 0 0 1px #c7d2fe; }

.export-actions{ margin-left:auto; display:flex; gap:8px; }
.filter-card{ position:relative; }
.filters-footer{ display:flex; align-items:flex-end; justify-content:space-between; gap:12px; margin-top:10px; }
.filters-footer .tips{ margin:0; padding-left:18px; line-height:1.45; }
.filters-footer .tips li{ margin:4px 0; }

/* Cards KPI */
.cards.kpi-minis{
  display:grid; grid-template-columns:repeat(4,var(--kpi-card-width));
  justify-content:space-between; gap:var(--kpi-gap);
}
.cards.kpi-minis .card,.cards.kpi-minis .total-kpi{ width:var(--kpi-card-width); max-width:var(--kpi-card-width); min-height:126px; padding:14px; }
.cards h3{ margin:0 0 6px; font-size:16px; }
.cards .muted{ color:var(--text-2); font-size:12px; }
.cards.kpi-minis .mini-kpi{ display:grid; grid-template-columns:repeat(3,1fr); gap:6px 12px; align-items:end; }
.cards.kpi-minis .mini-kpi div small{ display:block; font-size:11px; color:#6b7280; }
.cards.kpi-minis .mini-kpi div b{ display:block; font-size:13.5px; font-weight:700; color:#0f172a; }
.total-kpi .mini-kpi{ grid-template-columns:repeat(2,1fr); gap:6px 12px; }
.cards.kpi-minis .card::before,.total-kpi::before{ content:""; position:absolute; left:-1px; right:-1px; top:-1px; height:6px; border-radius:12px 12px 0 0; background:var(--line); }
.cards.kpi-minis .card[data-curve="A"]::before{ background:var(--curve-a); }
.cards.kpi-minis .card[data-curve="B"]::before{ background:var(--curve-b); }
.cards.kpi-minis .card[data-curve="C"]::before{ background:var(--curve-c); }
.total-kpi::before{ background:linear-gradient(90deg,#16a34a,#22c55e); }
.cards .card.selected{ transform:translateY(-1px); background:#f9fbff; }
.cards .card.selected[data-curve="A"]{ border-color:var(--curve-a); box-shadow:0 10px 28px rgba(20,184,166,.2); }
.cards .card.selected[data-curve="B"]{ border-color:var(--curve-b); box-shadow:0 10px 28px rgba(239,71,111,.2); }
.cards .card.selected[data-curve="C"]{ border-color:var(--curve-c); box-shadow:0 10px 28px rgba(109,40,217,.2); }

/* Top 5 */
.top3{ display:grid; grid-template-columns:repeat(3,1fr); gap:16px; }
.list h4{ margin:0 0 8px; font-size:16px; }
.list ul{ list-style:none; padding:0; margin:0; }
.list li{ display:flex; justify-content:space-between; gap:16px; padding:10px 0; border-bottom:1px dashed var(--line); font-size:14px; }
.list li:last-child{ border-bottom:none; }
.list .muted{ color:var(--text-2); }

/* ===== Tabela ===== */
.table-head{ display:flex; gap:12px; align-items:center; justify-content:space-between; }
.table-scroll{ overflow-x:auto; -webkit-overflow-scrolling:touch; border-radius:12px; background:var(--card-bg); }
.table-scroll table{ min-width:1460px; table-layout:fixed; }

table{ width:100%; border-collapse:collapse; margin-top:12px; background:#fff; }
thead th{
  font-size:12px; color:var(--text-2); font-weight:600; text-transform:uppercase;
  letter-spacing:.4px; padding:10px; background:#f8fafc; border-bottom:1px solid var(--line);
}
tbody td{ padding:12px 10px; border-bottom:1px solid var(--line); font-size:14px; }
tbody tr:hover{ background:#fcfcff; }

/* Índice A/B/C (coluna 1) — MAIS ESTREITA */
#grid thead th:first-child,
#grid tbody td:first-child{ width:62px; text-align:center; }
.idx-pill{ display:inline-flex; align-items:center; justify-content:center; min-width:24px; height:20px; padding:0 8px; border-radius:999px; font-weight:700; font-size:12px; color:#fff; }
.idx-A{ background:var(--curve-a); } .idx-B{ background:var(--curve-b); } .idx-C{ background:var(--curve-c); }

/* Larguras por coluna (ordem atual: 1 Índice, 2 MLB, 3 Título, 4 Unidades, 5 Unid.(%), 6 Valor, 7 FAT. %, 8 PROMO, 9 % PROMO., 10 ADS, 11 Cliq., 12 Impr., 13 Visit., 14 Conv.) */
#grid th:nth-child(2),  #grid td:nth-child(2)  { width:125px; }   /* MLB */
#grid th:nth-child(3),  #grid td:nth-child(3)  { max-width:415px; white-space:normal; line-height:1.25; } /* Título */

#grid th:nth-child(4),  #grid td:nth-child(4)  { width:65px;  text-align:right; }   /* Unidades */
#grid th:nth-child(5),  #grid td:nth-child(5)  { width:80px;  text-align:right; }   /* Unid. (%) */
#grid th:nth-child(6),  #grid td:nth-child(6)  { width:132px; text-align:right; }   /* Valor */
#grid th:nth-child(7),  #grid td:nth-child(7)  { width:86px;  text-align:right; }   /* FAT. % */

#grid th:nth-child(8),  #grid td:nth-child(8)  { width:70px;  text-align:center; } /* PROMO (Sim/Não) */
#grid th:nth-child(9),  #grid td:nth-child(9)  { width:88px;  text-align:right; }  /* % PROMO. */

#grid th:nth-child(10), #grid td:nth-child(10) { width:82px;  }                  /* ADS */
#grid th:nth-child(11), #grid td:nth-child(11) { width:84px;  text-align:right; } /* Cliq. */
#grid th:nth-child(12), #grid td:nth-child(12) { width:110px; text-align:right; } /* Impr. */
#grid th:nth-child(13), #grid td:nth-child(13) { width:104px; text-align:right; } /* Visit. */
#grid th:nth-child(14), #grid td:nth-child(14) { width:72px;  text-align:right; } /* Conv. */

#grid th, #grid td{ white-space:nowrap; text-overflow:ellipsis; overflow:hidden; }
#grid th.num, #grid td.num,
#grid th.percent, #grid td.percent{ text-align:right; }
#grid th.promo, #grid td.promo{ text-align:center; font-weight:600; }
#grid abbr{ text-decoration:none; border-bottom:0; cursor:help; }

/* Paginador */
.paginator{ display:flex; gap:6px; align-items:center; justify-content:center; padding:10px 0; margin-top:8px; }
.paginator .pg-btn{ border:1px solid var(--card-border); background:#fff; color:#111; cursor:pointer; padding:6px 10px; border-radius:8px; min-width:34px; line-height:1; font-weight:600; }
.paginator .pg-btn:hover{ background:#f8fafc; }
.paginator .pg-btn.active{ background:#eef2ff; color:#1d4ed8; border-color:#c7d2fe; cursor:default; }
.paginator .pg-btn.disabled{ opacity:.5; cursor:not-allowed; }
.pager-wrap{ margin-top:10px; overflow-x:auto; -webkit-overflow-scrolling:touch; }
.pager-wrap .paginator{ display:inline-flex; gap:6px; padding-bottom:4px; white-space:nowrap; }

/* Chips multicontas */
.form-grid{ grid-template-columns:repeat(6,minmax(0,1fr)); }
.form-group{ display:flex; flex-direction:column; gap:6px; }
.group-multicontas{ grid-column:span 2; }
.select-multi{ height:104px; padding:6px 8px; border-radius:10px; border:1px solid var(--card-border); background:#fff; outline:none; }
.select-multi:focus{ border-color:#c7d2fe; box-shadow:0 0 0 3px rgba(37,99,235,.12); }
.chips.chips--small{ display:flex; gap:6px; flex-wrap:wrap; margin-top:6px; }
.chips.chips--small .chip{ padding:4px 8px; border-radius:999px; background:var(--chip-bg); border:1px solid var(--chip-border); font-size:12px; color:var(--text-2); }

/* Badge ADS */
.ads-badge{ display:inline-flex; align-items:center; gap:6px; padding:4px 8px; border-radius:999px; font-size:12px; font-weight:600; border:1px solid var(--card-border); background:#fff; color:var(--text-2); }
.ads-badge .dot{ width:7px; height:7px; border-radius:50%; }
.ads-badge.ads-yes{ background:#E7F8ED; color:#157F3E; }
.ads-badge.ads-yes .dot{ background:#22C55E; }
.ads-badge.ads-paused{ background:#FFF6E5; color:#B45309; }
.ads-badge.ads-paused .dot{ background:#F59E0B; }
.ads-badge.ads-no{ background:#F3F4F6; color:#374151; }
.ads-badge.ads-no .dot{ background:#9CA3AF; }

/* ===== Painel lateral de progresso ===== */
.abc-progress{
  position:fixed; top:110px; right:24px; width:320px; max-width:calc(100vw - 48px);
  background:#fff; border:1px solid #e5e7eb; box-shadow:0 10px 30px rgba(0,0,0,.08);
  border-radius:14px; padding:14px 14px 10px; z-index:9999; transform:translateX(16px);
  opacity:0; transition:transform .18s, opacity .18s; font:14px/1.35 system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
}
.abc-progress:not(.hidden){ transform:translateX(0); opacity:1; }
.abc-progress__head{ display:flex; align-items:center; justify-content:space-between; gap:8px; margin-bottom:10px; }
#abcProgressClose{ border:0; background:transparent; font-size:18px; line-height:1; cursor:pointer; opacity:.6; }
#abcProgressClose:hover{ opacity:1; }
.abc-progress__bar{ position:relative; height:8px; background:#f3f4f6; border-radius:999px; overflow:hidden; }
.abc-progress__bar-fill{ position:absolute; inset:0 auto 0 0; height:100%; background:linear-gradient(90deg,#3b82f6,#2563eb); border-radius:inherit; width:0%; transition:width .25s; }
.abc-progress__bar-indet{ position:absolute; inset:0; display:none; background:linear-gradient(90deg,transparent 0%,rgba(59,130,246,.35) 40%,rgba(59,130,246,.35) 60%,transparent 100%); background-size:200% 100%; animation:abc-indet 1.1s linear infinite; }
@keyframes abc-indet{ from{background-position:200% 0} to{background-position:-200% 0} }
.abc-progress__step{ margin-top:8px; color:#374151; }
.abc-progress__log{ list-style:none; margin:8px 0 0; padding:0; max-height:160px; overflow:auto; }
.abc-progress__log li{ color:#6b7280; font-size:12px; margin:2px 0; white-space:nowrap; text-overflow:ellipsis; overflow:hidden; }
@media (max-width:700px){ .abc-progress{ right:12px; left:12px; width:auto; } }

/* FAB de progresso */
#reportFab{
  position:fixed; right:16px; bottom:16px; z-index:9999; display:none; background:#fff;
  border:1px solid rgba(0,0,0,.06); box-shadow:0 10px 24px rgba(0,0,0,.10);
  border-radius:12px; padding:10px 12px; min-width:240px; max-width:300px;
  font:500 13px/1.2 system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
}
#reportFab .rf-row{ display:flex; align-items:center; gap:12px; }
#reportFab .rf-title{ font-weight:600; margin-bottom:2px; }
#reportFab .rf-msg{ color:#667085; }
#reportFab .rf-close{ margin-left:auto; background:transparent; border:0; font-size:16px; color:#98A2B3; cursor:pointer; padding:2px 6px; border-radius:8px; }
#reportFab .rf-close:hover{ background:#F2F4F7; color:#475467; }
#reportFab .rf-spinner{ width:22px; height:22px; border:3px solid rgba(0,0,0,.15); border-top-color:var(--accent); border-radius:50%; animation:rfspin .9s linear infinite; flex:0 0 auto; }
@keyframes rfspin{ to{ transform:rotate(360deg); } }
#reportFab .rf-check{ width:22px; height:22px; border-radius:50%; background:#16a34a; position:relative; flex:0 0 auto; }
#reportFab .rf-check::after{ content:""; position:absolute; left:5px; top:3px; width:6px; height:12px; border:3px solid #fff; border-top:none; border-left:none; transform:rotate(45deg); }
#reportFab .rf-check.err{ background:#e11d48; }
/* contador de progresso no FAB */
#reportFab .rf-pct{
  font-size: 12px;
  color: #98A2B3;
  margin-top: 2px;
}
#reportFab .rf-check + .rf-pct { color: #16a34a; }
#reportFab .rf-check.err + .rf-pct { color: #e11d48; }

/* ===== Responsivo extra ===== */
@media (max-width:1280px){
  #grid th:nth-child(3), #grid td:nth-child(3){ max-width:360px; }
  #grid td.num, #grid td.percent{ padding-right:8px; }
}
@media (max-width:1024px){
  .filters{ grid-template-columns:repeat(3,minmax(0,1fr)); }
  .top3{ grid-template-columns:1fr; }
  .filters-footer{ flex-direction:column; gap:10px; }
  .filters-footer .export-actions.bottom{ align-self:flex-end; }
  .group-multicontas{ grid-column:span 3; }
}
@media (max-width:960px){ .cards.kpi-minis{ grid-template-columns:repeat(2,var(--kpi-card-width)); } }
@media (max-width:640px){
  .cards.kpi-minis{ grid-template-columns:1fr; justify-content:stretch; }
  .cards.kpi-minis .card,.cards.kpi-minis .total-kpi{ width:auto; max-width:none; }
  .group-multicontas{ grid-column:span 6; }
}
